/*!
* Version 2.0.0-rc1
* jQuery: desoSlide plugin
* Copyright - 2014 - https://github.com/sylouuu/desoslide
* This source code is under the MIT License
*/
!function(t,e,s,i){"use strict";function o(e,s){this.elem=e,this.options=t.extend(!0,{},r,s),this._defaults=r,this._name=n,this._namespace=n.toLowerCase(),this.props={thumbs:[],effect:{provider:null,name:null,list:{animate:{css:"animated",fade:{"in":"fadeIn",out:"fadeOut"},sideFade:{"in":"fadeInLeft",out:"fadeOutRight"},sideFadeBig:{"in":"fadeInLeftBig",out:"fadeOutRightBig"},flip:{"in":"flipInX",out:"flipOutX"},light:{"in":"lightSpeedIn",out:"lightSpeedOut"},roll:{"in":"rollIn",out:"rollOut"},rotate:{"in":"rotateIn",out:"rotateOut"}},magic:{css:"magictime",foolish:{"in":"foolishIn",out:"foolishOut"},swash:{"in":"swashIn",out:"swashOut"},tin:{"in":"tinLeftIn",out:"tinRightOut"},puff:{"in":"puffIn",out:"puffOut"},twister:{"in":"twisterInDown",out:"holeOut"}}}},img:{$overlay:null,to_show:this.options.first,timer:null},controls:{$wrapper:null},plugin_status:null},this._init()}var n="desoSlide",r={thumbs:null,imageClass:"img-responsive",auto:{load:!0,start:!1},first:0,interval:3e3,effect:{provider:"animate",name:"fade"},overlay:"always",controls:{show:!0,keys:!1},events:{onThumbClick:null,onImageShow:null,onImageShown:null,onImageHide:null,onImageHidden:null,onImageClick:null,onPrev:null,onPause:null,onPlay:null,onNext:null,onError:null,onWarning:null,onSuccess:null}};o.prototype={_init:function(){var e=this;null===this.options.thumbs?this._errorHandler("error","The `thumbs` option doesn't exist."):0===t(this.options.thumbs).length&&this._errorHandler("error","The `thumbs` selector ("+t(this.options.thumbs).selector+") doesn't exist.");var s=["always","hover","none"];-1===s.indexOf(this.options.overlay)&&(this._errorHandler("error","Incorrect value for the `overlay` option. Default value is used."),this.options.overlay=this._defaults.overlay),t(this.options.thumbs).each(function(s,o){t(o).attr("href")!==i?t(o).find("img").length?(e.props.thumbs.push({src:t(o).attr("href"),alt:t(o).find("img").attr("alt")||null,caption_title:t(o).find("img").data(e._namespace+"-caption-title")||null,caption_link:t(o).find("img").data(e._namespace+"-caption-link")||null}),t(o).find("img").attr("alt")===i&&e._errorHandler("warning","The `alt` attribute is missing on the "+s+"-indexed thumb, it's mandatory on <img> tags."),t(o).attr("data-"+e._namespace+"-index",s)):e._errorHandler("error","Your link on the "+s+"-indexed thumb must have an <img> tag as a child."):e._errorHandler("error","The `href` attribute is missing on the "+s+"-indexed thumb, it's mandatory on <a> tags.")}),this.options.first>=this.props.thumbs.length&&(this._errorHandler("error","The `first` option must be between 0 and "+(this.props.thumbs.length-1)+". Default value is used."),this.options.first=this._defaults.first,this.props.img.to_show=this._defaults.first),e._imagesLoading(),e._addWrapper(),e.setEffect({provider:e.options.effect.provider,name:e.options.effect.name}),this.props.thumbs[this.props.img.to_show]!==i&&e._showImage(),e._events()},rebuild:function(){return this.init(),t(this.elem)},getThumbs:function(t){var e;return e=t!==i?this._isThumbExists(t)===!0?this.props.thumbs[t]:null:this.props.thumbs},setEffect:function(t){var e={provider:null,name:null};return t!==i&&null!==t.provider&&null!==t.name?this.props.effect.list.hasOwnProperty(t.provider)?"random"===t.name?(e.provider=t.provider,e.name=this.getRandomEffect(t.provider)):this.props.effect.list[t.provider].hasOwnProperty(t.name)?(e.provider=t.provider,e.name=t.name):(e.provider=this._defaults.effect.provider,e.name=this._defaults.effect.name,this._errorHandler("error","Incorrect value for the `effect.name` option. Default value is used.")):(e.provider=this._defaults.effect.provider,e.name=this._defaults.effect.name,this._errorHandler("error","Incorrect value for the `effect.provider` option. Default value is used.")):(e.provider=this._defaults.effect.provider,e.name=this._defaults.effect.name,this._errorHandler("error","Incorrect values for `effect.provider` and `effect.name` option. Default value is used.")),this.props.effect.provider=e.provider,this.props.effect.name=e.name,e},pause:function(){return t(this.options.thumbs).length>1&&(this.options.auto.start===!0&&this.props.img.timer&&(this.options.auto.start=!1,clearTimeout(this.props.img.timer),this.props.controls.$wrapper&&this.props.controls.$wrapper.find('a[href="#pause"]').hide().parent().find('a[href="#play"]').show(),this.options.events.onPause&&this.options.events.onPause()),t(this.elem).trigger("pause."+this._namespace)),t(this.elem)},play:function(){return t(this.options.thumbs).length>1&&(this.options.auto.start===!1&&(this.options.auto.start=!0,this.goNext(!0),this.props.controls.$wrapper&&this.props.controls.$wrapper.find('a[href="#play"]').hide().parent().find('a[href="#pause"]').show()),this.options.events.onPlay&&this.options.events.onPlay(),t(this.elem).trigger("play."+this._namespace)),t(this.elem)},goPrev:function(e){if(t(this.options.thumbs).length>1){var s=this;e||this.options.auto.start!==!0||this.pause(),this.props.img.to_show--,this.props.img.to_show<0&&(this.props.img.to_show=t(this.options.thumbs).length-1),this._hideImage(function(){s._showImage()}),this.options.events.onPrev&&this.options.events.onPrev(),t(this.elem).trigger("prev."+this._namespace)}return t(this.elem)},goNext:function(e){if(t(this.options.thumbs).length>1){var s=this;e||this.options.auto.start!==!0||this.pause(),this.props.img.to_show++,this.props.img.to_show>=t(this.options.thumbs).length&&(this.props.img.to_show=0),this._hideImage(function(){s._showImage()}),this.options.events.onNext&&this.options.events.onNext(),t(this.elem).trigger("next."+this._namespace)}return t(this.elem)},goTo:function(e){if(t(this.options.thumbs).length>1&&this._isThumbExists(e)===!0){var s=this;this.options.auto.start===!0&&this.pause(),e!==this.props.img.to_show&&(null!==this.props.img.$overlay&&this.props.img.$overlay.animate({opacity:0}),s.props.img.to_show=e,this._hideImage(function(){s._showImage()}))}return t(this.elem)},_isThumbExists:function(t){var e;return"number"==typeof t&&(this.props.thumbs[t]!==i?e=!0:(this._errorHandler("error","The "+t+"-indexed thumb doesn't exist."),e=!1)),e},_imagesLoading:function(){this.options.auto.load===!0&&t.each(this.props.thumbs,function(e,s){t("<img>",{src:s.src,alt:s.alt}).hide().appendTo("body")})},_addWrapper:function(){var e=t("<img>").attr("alt",this._name).addClass(this.options.imageClass).css("opacity",0);t(this.elem).html(e).wrapInner(t("<div>",{"class":this._namespace+"-wrapper"}))},_clearEffectClass:function(){var e,s,o=this;if(t(this.elem).find("img:first").attr("class")!==i){var n=t(this.elem).find("img:first").attr("class").split(/\s+/);for(e in o.props.effect.list)if(o.props.effect.list.hasOwnProperty(e))for(s in o.props.effect.list[e])o.props.effect.list[e].hasOwnProperty(s)&&(-1!==n.indexOf(o.props.effect.list[e][s])&&t(this.elem).find("img:first").removeClass(o.props.effect.list[e][s]),o.props.effect.list[e][s].in&&-1!==n.indexOf(o.props.effect.list[e][s].in)&&t(this.elem).find("img:first").removeClass(o.props.effect.list[e][s].in),o.props.effect.list[e][s].out&&-1!==n.indexOf(o.props.effect.list[e][s].out)&&t(this.elem).find("img:first").removeClass(o.props.effect.list[e][s].out))}},getRandomEffect:function(t){var e,s,i=0;for(s in this.props.effect.list[t])this.props.effect.list[t].hasOwnProperty(s)&&"css"!==s&&Math.random()<1/++i&&(e=s);return e},_showImage:function(){var e=this;null===this.props.plugin_status&&this._errorHandler(),e.options.events.onImageShow&&e.options.events.onImageShow(t(e.elem).find("img:first")),t(this.elem).find("img:first").attr("src",this.props.thumbs[this.props.img.to_show].src).attr("alt",this.props.thumbs[this.props.img.to_show].alt).one("load",function(){t(this).removeClass(e.props.effect.list[e.props.effect.provider].css+" "+e.props.effect.list[e.props.effect.provider][e.props.effect.name].out).addClass(e.props.effect.list[e.props.effect.provider].css+" "+e.props.effect.list[e.props.effect.provider][e.props.effect.name].in).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e._addOverlay(),e.options.events.onImageShown&&e.options.events.onImageShown(t(e.elem).find("img:first"))}),e.options.auto.start===!0&&(e.props.img.timer=setTimeout(function(){e.goNext(!0)},e.options.interval<1500?1500:e.options.interval))})},_hideImage:function(e){var s=this;this._clearEffectClass(),s.options.events.onImageHide&&s.options.events.onImageHide(t(s.elem).find("img:first")),t(this.elem).find("img:first").removeClass(this.props.effect.list[this.props.effect.provider].css+" "+this.props.effect.list[this.props.effect.provider][this.props.effect.name].in).addClass(this.props.effect.list[this.props.effect.provider].css+" "+this.props.effect.list[this.props.effect.provider][this.props.effect.name].out).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.options.events.onImageHidden&&s.options.events.onImageHidden(t(s.elem).find("img:first")),e&&e()})},_addOverlay:function(){if("none"!==this.options.overlay){var e=t(this.elem).find("img").position(),s=parseInt(t(this.elem).find("img").css("border-left-width"),10),i=t(this.elem).find("img").width()+s,o=t(this.elem).find("img").height()+s;0===t(this.elem).find("."+this._namespace+"-overlay").length&&t("<div>",{"class":this._namespace+"-overlay"}).appendTo(t(this.elem).find("."+this._namespace+"-wrapper")),this.props.img.$overlay=t(this.elem).find("."+this._namespace+"-overlay");var n=parseInt(this.props.img.$overlay.css("padding-top").replace("px",""),10),r=parseInt(this.props.img.$overlay.css("padding-bottom").replace("px",""),10),a=parseInt(this.props.img.$overlay.css("padding-left").replace("px",""),10),p=parseInt(this.props.img.$overlay.css("padding-right").replace("px",""),10),h=parseInt(this.props.img.$overlay.css("height").replace("px",""),10)-(a+p);h=parseInt(o,10)-h-(n+r);var l=e.top+h,f=e.left;this.props.img.$overlay.css({left:f+"px",top:l+"px",width:i+"px"}),"always"===this.options.overlay&&this.props.img.$overlay.animate({opacity:.7},500),this._captionManagement(),this.options.controls.show===!0&&this._addControls()}},_addControls:function(){t(this.elem).find("."+this._namespace+"-controls-wrapper").remove();var e='<a class="'+this._namespace+'-controls prev" href="#prev"></a>',s='<a class="'+this._namespace+'-controls pause" href="#pause"></a>',i='<a class="'+this._namespace+'-controls play" href="#play"></a>',o='<a class="'+this._namespace+'-controls next" href="#next"></a>',n=t("<div>",{"class":this._namespace+"-controls-wrapper"}).append(e+s+i+o);n.appendTo(this.props.img.$overlay.find("a:first").length>0?this.props.img.$overlay.find("a:first"):this.props.img.$overlay),this.props.controls.$wrapper=t(this.elem).find("."+this._namespace+"-controls-wrapper"),this.props.controls.$wrapper.length&&(this.options.auto.start?this.props.controls.$wrapper.find('a[href="#play"]').hide().parent().find('a[href="#pause"]').show():this.props.controls.$wrapper.find('a[href="#pause"]').hide().parent().find('a[href="#play"]').show())},_captionManagement:function(){if(null!==this.props.thumbs[this.props.img.to_show].caption_title){this.props.img.$overlay.html('<span class="'+this._namespace+'-caption-title">'+this.props.thumbs[this.props.img.to_show].caption_title+"</span>");var e=this.props.img.$overlay.find("a:first").length>0?!0:!1,s=null!==this.props.thumbs[this.props.img.to_show].caption_link?!0:!1,i='<a href="'+this.props.thumbs[this.props.img.to_show].caption_link+'" target="_blank"></a>';if(e===!0&&s===!0)this.props.img.$overlay.find("a:first").attr("href",this.props.thumbs[this.props.img.to_show].caption_link);else if(e===!0&&s===!1){var o=this.props.img.$overlay.find("a:first"),n=o.children().clone(),r=o.parent();o.remove(),n.appendTo(r),this.props.img.$overlay.find("span:first").empty()}else e===!1&&s===!0&&t(this.elem).find("."+this._namespace+"-overlay span:first").wrap(i)}},_events:function(){var i=this;t(this.options.thumbs).on("click",function(e){e.preventDefault(),i.goTo(t(this).data(i._namespace+"-index")),i.options.events.onThumbClick&&i.options.events.onThumbClick()}),t(this.elem).find("img:first").on("click",function(t){t.preventDefault(),i.options.events.onImageClick&&i.options.events.onImageClick()}),t(this.elem).on("click","."+this._namespace+"-controls-wrapper a",t(this.elem),function(e){switch(e.preventDefault(),t(this).attr("href")){case"#prev":i.goPrev();break;case"#pause":i.pause();break;case"#play":i.play();break;case"#next":i.goNext()}}),t(this.elem).find("."+this._namespace+"-wrapper").on({mouseover:function(){"hover"===i.options.overlay&&null!==i.props.img.$overlay&&i.props.img.$overlay.stop().animate({opacity:.7},400)},mouseleave:function(){"hover"===i.options.overlay&&null!==i.props.img.$overlay&&i.props.img.$overlay.stop().animate({opacity:0},400)}}),this.options.controls.keys===!0&&t(s).on("keydown",function(t){switch(t.which){case 37:i.goPrev();break;case 39:i.goNext();break;case 32:t.preventDefault(),i.options.auto.start===!0?i.pause():i.play()}});var o=function(){var t=0;return function(e,s){clearTimeout(t),t=setTimeout(e,s)}}();"none"!==this.options.overlay&&t(e).bind("resize",function(){o(function(){i._addOverlay()},100)})},_errorHandler:function(t,e){switch(t){case"error":console!==i&&console.error(this._name+": "+e+" Check out the documentation."),this.options.events.onError&&this.options.events.onError(),this.props.plugin_status=t;break;case"warning":console!==i&&console.warn(this._name+": "+e),this.options.events.onWarning&&this.options.events.onWarning(),this.props.plugin_status=t;break;default:this.options.events.onSuccess&&this.options.events.onSuccess(),this.props.plugin_status=t}}},t.fn[n]=function(e){var s,r,a=arguments;return e===i||"object"==typeof e?r=this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new o(this,e))}):"string"==typeof e&&"_"!==e[0]?(s=t.data(this[0],"plugin_"+n),s[e]!==i&&(r=s[e].apply(s,Array.prototype.slice.call(a,1)))):r=this.each(function(){s=t.data(this,"plugin_"+n),s instanceof o&&"function"==typeof s[e]&&s[e].apply(s,Array.prototype.slice.call(a,1))}),r}}(jQuery,window,document);