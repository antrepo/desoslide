/*!
* Version 2.0.0-rc1
* jQuery: desoSlide plugin
* Copyright - 2014 - https://github.com/sylouuu/desoslide
* This source code is under the MIT License
*/
!function(t,s,e,i){"use strict";function o(s,e){this.elem=s,this.options=t.extend(!0,{},r,e),this._defaults=r,this._name=n,this._namespace=n.toLowerCase(),this.props={thumbs:[],effect:{provider:null,name:null,list:{animate:{css:"animated",fade:{"in":"fadeIn",out:"fadeOut"},sideFade:{"in":"fadeInLeft",out:"fadeOutRight"},sideFadeBig:{"in":"fadeInLeftBig",out:"fadeOutRightBig"},flip:{"in":"flipInX",out:"flipOutX"},light:{"in":"lightSpeedIn",out:"lightSpeedOut"},roll:{"in":"rollIn",out:"rollOut"},rotate:{"in":"rotateIn",out:"rotateOut"}},magic:{css:"magictime",foolish:{"in":"foolishIn",out:"foolishOut"},swash:{"in":"swashIn",out:"swashOut"},tin:{"in":"tinLeftIn",out:"tinRightOut"},puff:{"in":"puffIn",out:"puffOut"},twister:{"in":"twisterInDown",out:"holeOut"}}}},img:{$overlay:null,to_show:this.options.first,timer:null},controls:{$wrapper:null},first_error:!1,plugin_status:null},this._init()}var n="desoSlide",r={thumbs:null,imageClass:"img-responsive",auto:{load:!0,start:!1},first:0,interval:3e3,effect:{provider:"animate",name:"fade"},overlay:"always",caption:!1,controls:{enable:!0,keys:!0},events:{onThumbClick:null,onImageShow:null,onImageShown:null,onImageHide:null,onImageHidden:null,onImageClick:null,onPrev:null,onPause:null,onPlay:null,onNext:null,onError:null,onWarning:null,onSuccess:null}};o.prototype={_init:function(){var s=this;null===this.options.thumbs?this._errorHandler("error","The `thumbs` option doesn't exist."):0===t(this.options.thumbs).length&&this._errorHandler("error","The `thumbs` selector ("+t(this.options.thumbs).selector+") doesn't exist.");var e=["always","hover","none"];-1===e.indexOf(this.options.overlay)&&(this._errorHandler("error","Incorrect value for the `overlay` option. Default value is used."),this.options.overlay=this._defaults.overlay),t(this.options.thumbs).each(function(e,o){s.props.thumbs.push({src:t(o).attr("href"),alt:t(o).find("img:first").attr("alt")||null,caption_title:t(o).find("img:first").data(s._namespace+"-caption-title")||null,caption_link:t(o).find("img:first").data(s._namespace+"-caption-link")||null}),t(o).find("img:first").attr("alt")===i&&s._errorHandler("warning","The `alt` attribute is missing on the thumb with index "+e+", it's mandatory on <img> tags."),t(o).attr("data-"+s._namespace+"-index",e)}),this.options.first>=this.props.thumbs.length&&(this._errorHandler("error","The `first` option must be between 0 and "+(this.props.thumbs.length-1)+". Default value is used."),this.options.first=this._defaults.first,this.props.img.to_show=this._defaults.first),s._imagesLoading(),s._addWrapper(),s.setEffect({provider:s.options.effect.provider,name:s.options.effect.name}),this.props.thumbs[this.props.img.to_show]!==i&&s._showImage(),s._events()},rebuild:function(){return this.init(),t(this.elem)},getThumbs:function(t){return t===i?this.props.thumbs:this.props.thumbs[t]},setEffect:function(s){var e={provider:null,name:null};return this.props.effect.list.hasOwnProperty(s.provider)?"random"===s.name?(e.provider=s.provider,e.name=this.getRandomEffect(s.provider)):this.props.effect.list[s.provider].hasOwnProperty(s.name)?(e.provider=s.provider,e.name=s.name):(e.provider=this._defaults.effect.provider,e.name=this._defaults.effect.name,this._errorHandler("error","Incorrect value for the `effect.name` option. Default value is used.")):(e.provider=this._defaults.effect.provider,e.name=this._defaults.effect.name,this._errorHandler("error","Incorrect value for the `effect.provider` option. Default value is used.")),this.props.effect.provider=e.provider,this.props.effect.name=e.name,t(this.elem)},pause:function(){return t(this.options.thumbs).length>1&&(this.options.auto.start===!0&&this.props.img.timer&&(this.options.auto.start=!1,clearTimeout(this.props.img.timer),this.props.controls.$wrapper&&this.props.controls.$wrapper.find('a[href="#pause"]').hide().parent().find('a[href="#play"]').show(),this.options.events.onPause&&this.options.events.onPause()),t(this.elem).trigger("pause."+this._namespace)),t(this.elem)},play:function(){return t(this.options.thumbs).length>1&&(this.options.auto.start===!1&&(this.options.auto.start=!0,this.goNext(!0),this.props.controls.$wrapper&&this.props.controls.$wrapper.find('a[href="#play"]').hide().parent().find('a[href="#pause"]').show()),this.options.events.onPlay&&this.options.events.onPlay(),t(this.elem).trigger("play."+this._namespace)),t(this.elem)},goPrev:function(s){if(t(this.options.thumbs).length>1){var e=this;s||this.options.auto.start!==!0||this.pause(),this.props.img.to_show--,this.props.img.to_show<0&&(this.props.img.to_show=t(this.options.thumbs).length-1),this._hideImage(function(){e._showImage()}),this.options.events.onPrev&&this.options.events.onPrev(),t(this.elem).trigger("prev."+this._namespace)}return t(this.elem)},goNext:function(s){if(t(this.options.thumbs).length>1){var e=this;s||this.options.auto.start!==!0||this.pause(),this.props.img.to_show++,this.props.img.to_show>=t(this.options.thumbs).length&&(this.props.img.to_show=0),this._hideImage(function(){e._showImage()}),this.options.events.onNext&&this.options.events.onNext(),t(this.elem).trigger("next."+this._namespace)}return t(this.elem)},goTo:function(s){if(t(this.options.thumbs).length>1){var e=this;this.options.auto.start===!0&&this.pause(),s!==this.props.img.to_show&&(null!==this.props.img.$overlay&&this.props.img.$overlay.animate({opacity:0}),e.props.img.to_show=s,this._hideImage(function(){e._showImage()}))}return t(this.elem)},_imagesLoading:function(){this.options.auto.load===!0&&t.each(this.props.thumbs,function(s,e){t("<img>",{src:e.src,alt:e.alt}).hide().appendTo("body")})},_addWrapper:function(){var s=t("<img>").attr("alt",this._name).addClass(this.options.imageClass).css("opacity",0);t(this.elem).html(s).wrapInner(t("<div>",{"class":this._namespace+"-wrapper"}))},_clearEffectClass:function(){var s,e,o=this;if(t(this.elem).find("img:first").attr("class")!==i){var n=t(this.elem).find("img:first").attr("class").split(/\s+/);for(s in o.props.effect.list)if(o.props.effect.list.hasOwnProperty(s))for(e in o.props.effect.list[s])o.props.effect.list[s].hasOwnProperty(e)&&(-1!==n.indexOf(o.props.effect.list[s][e])&&t(this.elem).find("img:first").removeClass(o.props.effect.list[s][e]),o.props.effect.list[s][e].in&&-1!==n.indexOf(o.props.effect.list[s][e].in)&&t(this.elem).find("img:first").removeClass(o.props.effect.list[s][e].in),o.props.effect.list[s][e].out&&-1!==n.indexOf(o.props.effect.list[s][e].out)&&t(this.elem).find("img:first").removeClass(o.props.effect.list[s][e].out))}},getRandomEffect:function(t){var s,e,i=0;for(e in this.props.effect.list[t])this.props.effect.list[t].hasOwnProperty(e)&&"css"!==e&&Math.random()<1/++i&&(s=e);return s},_showImage:function(){var s=this;null===this.props.plugin_status&&this._errorHandler(),s.options.events.onImageShow&&s.options.events.onImageShow(t(s.elem).find("img:first")),t(this.elem).find("img:first").attr("src",this.props.thumbs[this.props.img.to_show].src).attr("alt",this.props.thumbs[this.props.img.to_show].alt).one("load",function(){t(this).removeClass(s.props.effect.list[s.props.effect.provider].css+" "+s.props.effect.list[s.props.effect.provider][s.props.effect.name].out).addClass(s.props.effect.list[s.props.effect.provider].css+" "+s.props.effect.list[s.props.effect.provider][s.props.effect.name].in).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s._addOverlay(),s.options.events.onImageShown&&s.options.events.onImageShown(t(s.elem).find("img:first"))}),s.options.auto.start===!0&&(s.props.img.timer=setTimeout(function(){s.goNext(!0)},s.options.interval<1500?1500:s.options.interval))})},_hideImage:function(s){var e=this;this._clearEffectClass(),e.options.events.onImageHide&&e.options.events.onImageHide(t(e.elem).find("img:first")),t(this.elem).find("img:first").removeClass(this.props.effect.list[this.props.effect.provider].css+" "+this.props.effect.list[this.props.effect.provider][this.props.effect.name].in).addClass(this.props.effect.list[this.props.effect.provider].css+" "+this.props.effect.list[this.props.effect.provider][this.props.effect.name].out).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.events.onImageHidden&&e.options.events.onImageHidden(t(e.elem).find("img:first")),s&&s()})},_addOverlay:function(){if("none"!==this.options.overlay){if(this.options.caption===!0||this.options.controls.enable===!0){var s=t(this.elem).find("img").position(),e=parseInt(t(this.elem).find("img").css("border-left-width"),10),i=t(this.elem).find("img").width()+e,o=t(this.elem).find("img").height()+e;0===t(this.elem).find("."+this._namespace+"-overlay").length&&t("<div>",{"class":this._namespace+"-overlay"}).appendTo(t(this.elem).find("."+this._namespace+"-wrapper")),this.props.img.$overlay=t(this.elem).find("."+this._namespace+"-overlay");var n=parseInt(this.props.img.$overlay.css("padding-top").replace("px",""),10),r=parseInt(this.props.img.$overlay.css("padding-bottom").replace("px",""),10),a=parseInt(this.props.img.$overlay.css("padding-left").replace("px",""),10),p=parseInt(this.props.img.$overlay.css("padding-right").replace("px",""),10),h=parseInt(this.props.img.$overlay.css("height").replace("px",""),10)-(a+p);h=parseInt(o,10)-h-(n+r);var l=s.top+h,f=s.left;this.props.img.$overlay.css({left:f+"px",top:l+"px",width:i+"px"}),"always"===this.options.overlay&&this.props.img.$overlay.animate({opacity:.7},500),this.options.caption===!0&&(this._setCaptionTitle(this.props.thumbs[this.props.img.to_show].caption_title),this._addCaptionLink())}this.options.controls.enable===!0&&this._addControls()}},_addControls:function(){t(this.elem).find("."+this._namespace+"-controls-wrapper").remove();var s='<a class="'+this._namespace+'-controls prev" href="#prev"></a>',e='<a class="'+this._namespace+'-controls pause" href="#pause"></a>',i='<a class="'+this._namespace+'-controls play" href="#play"></a>',o='<a class="'+this._namespace+'-controls next" href="#next"></a>',n=t("<div>",{"class":this._namespace+"-controls-wrapper"}).append(s+e+i+o);n.appendTo(this.props.img.$overlay.find("a:first").length>0?this.props.img.$overlay.find("a:first"):this.props.img.$overlay),this.props.controls.$wrapper=t(this.elem).find("."+this._namespace+"-controls-wrapper"),this.props.controls.$wrapper.length&&(this.options.auto.start?this.props.controls.$wrapper.find('a[href="#play"]').hide().parent().find('a[href="#pause"]').show():this.props.controls.$wrapper.find('a[href="#pause"]').hide().parent().find('a[href="#play"]').show())},_setCaptionTitle:function(t){null!==t&&this.props.img.$overlay.html("<span>"+t+"</span>")},_addCaptionLink:function(){var s=this.props.img.$overlay.find("a:first").length>0?!0:!1,e=null!==this.props.thumbs[this.props.img.to_show].caption_link?!0:!1,i='<a href="'+this.props.thumbs[this.props.img.to_show].caption_link+'" target="_blank"></a>';if(s===!0&&e===!0)this.props.img.$overlay.find("a:first").attr("href",this.props.thumbs[this.props.img.to_show].caption_link);else if(s===!0&&e===!1){var o=this.props.img.$overlay.find("a:first"),n=o.children().clone(),r=o.parent();o.remove(),n.appendTo(r),this.props.img.$overlay.find("span:first").empty()}else s===!1&&e===!0&&t(this.elem).find("."+this._namespace+"-overlay span:first").wrap(i)},_events:function(){var i=this;t(this.options.thumbs).on("click",function(s){s.preventDefault(),i.goTo(t(this).data(i._namespace+"-index")),i.options.events.onThumbClick&&i.options.events.onThumbClick()}),t(this.elem).find("img:first").on("click",function(t){t.preventDefault(),i.options.events.onImageClick&&i.options.events.onImageClick()}),t(this.elem).on("click","."+this._namespace+"-controls-wrapper a",t(this.elem),function(s){switch(s.preventDefault(),t(this).attr("href")){case"#prev":i.goPrev();break;case"#pause":i.pause();break;case"#play":i.play();break;case"#next":i.goNext()}}),"hover"===this.options.overlay&&null!==i.props.img.$overlay&&i.props.img.$overlay.length>0&&t(this.elem).find("img:first").on({mouseover:function(){i.props.img.$overlay.stop().animate({opacity:.7},400)},mouseleave:function(){i.props.img.$overlay.stop().animate({opacity:0},400)}}),this.options.controls.enable===!0&&this.options.controls.keys===!0&&t(e).on("keydown",function(t){switch(t.which){case 37:i.goPrev();break;case 39:i.goNext();break;case 32:t.preventDefault(),i.options.auto.start===!0?i.pause():i.play()}});var o=function(){var t=0;return function(s,e){clearTimeout(t),t=setTimeout(s,e)}}();"none"!==this.options.overlay&&t(s).bind("resize",function(){o(function(){i._addOverlay()},100)})},_errorHandler:function(t,s){if(this.props.first_error===!1)switch(t){case"error":console!==i&&console.error(this._name+": "+s+" Check out the documentation."),this.options.events.onError&&this.options.events.onError(),this.props.first_error=t,this.props.plugin_status=t;break;case"warning":console!==i&&console.warn(this._name+": "+s),this.options.events.onWarning&&this.options.events.onWarning(),this.props.plugin_status=t;break;default:this.options.events.onSuccess&&this.options.events.onSuccess(),this.props.plugin_status=t}}},t.fn[n]=function(s){var e,r,a=arguments;return s===i||"object"==typeof s?r=this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new o(this,s))}):"string"==typeof s&&"_"!==s[0]?(e=t.data(this[0],"plugin_"+n),r=e[s].apply(e,Array.prototype.slice.call(a,1))):r=this.each(function(){e=t.data(this,"plugin_"+n),e instanceof o&&"function"==typeof e[s]&&e[s].apply(e,Array.prototype.slice.call(a,1))}),r}}(jQuery,window,document);