/*!
* Version 1.2.2
* jQuery: desoSlide plugin - jquery.desoslide.js
* Copyright - 2013 - https://github.com/sylouuu/desoslide
* This source code is under the MIT License
*/
!function(e){"use strict";e.fn.desoSlide=function(n){var a,t,i,o,r,s,d,l,c,f={main:{container:!1,cssClass:"",insertion:"append"},auto:{load:!0,start:!1},first:0,interval:3e3,effect:"fade",overlay:"always",caption:!1,controls:{enable:!0,keys:!0},result:!1},p=e.extend(!0,{},f,n),u=function(){var e=0;return function(n,a){clearTimeout(e),e=setTimeout(n,a)}}(),m=this,h=m.find("li"),g=h.length,v=p.first,y=e(p.main.container).find(".desoSlide-overlay"),w=p.interval<1500?1500:p.interval,k=!1,b=!1,S={checks:function(){m.length||S.resultHandler("error",m.selector+" doesn't exist."),p.main.container?e(p.main.container).length||S.resultHandler("error",e(p.main.container).selector+" doesn't exist."):S.resultHandler("error",'You must specify the "main.container" param. Check out the documentation.');var n=["always","hover","none"];-1===n.indexOf(p.overlay)&&S.resultHandler("error",'Bad value for the "overlay" param. Check out the documentation.'),v>=g&&(0===g?S.resultHandler("error","You must have at least 1 thumbnail."):S.resultHandler("error",'The "first" param must be between 0 and '+(g-1)+"."))},checkData:function(){!p.caption||void 0!==s&&""!==s||S.resultHandler("warning","The captions are enabled and the data-desoslide-caption attribute is missing on a thumb. Add it or disable captions. Check out the documention."),(void 0===r||""===r)&&S.resultHandler("warning","The alt attribute is missing on a thumb, it's mandatory on <img> tags.")},init:function(){S.loadImages(),S.effectHandler(),S.addWrapper(),S.displayImg()},loadImages:function(){p.auto.load&&h.find("a").each(function(n,a){e("<img>",{src:a.href,alt:""}).hide().appendTo("body")})},addWrapper:function(){var n=e("<div>",{"class":"desoSlide-wrapper"}),a=e("<img>").addClass(p.main.cssClass).css("opacity",0);switch(p.main.insertion){case"prepend":a.prependTo(e(p.main.container)).wrap(n);break;case"append":a.appendTo(e(p.main.container)).wrap(n);break;case"replace":e(p.main.container).html(a).wrapInner(n);break;default:S.resultHandler("error",'Bad value for the "insertion" param. Check out the documentation.')}},effectHandler:function(){c={fade:{"in":"fadeIn",out:"fadeOut"},sideFade:{"in":"fadeInLeft",out:"fadeOutRight"},sideFadeBig:{"in":"fadeInLeftBig",out:"fadeOutRightBig"},flip:{"in":"flipInX",out:"flipOutX"},light:{"in":"lightSpeedIn",out:"lightSpeedOut"},roll:{"in":"rollIn",out:"rollOut"},rotate:{"in":"rotateIn",out:"rotateOut"}},c.hasOwnProperty(p.effect)||(p.effect=f.effect,S.resultHandler("error",'Bad value for the "effect" param. Default value is used. Check out the documentation.'))},outEffect:function(){e(p.main.container).find("img").removeClass("animated "+c[p.effect].in).addClass("animated "+c[p.effect].out),setTimeout(function(){S.displayImg()},900)},displayImg:function(){S.resultHandler(),a=0,0>v&&(v=g-1),v>=g&&(v=0),a=v,o=h.find("a").eq(a).attr("href"),r=h.find("img").eq(a).attr("alt"),s=h.find("img").eq(a).data("desoslide-caption"),d=h.find("img").eq(a).data("desoslide-href"),S.checkData(),e(p.main.container).find("img").attr({src:o,alt:r,"data-desoslide-caption":s}).one("load",function(){e(this).removeClass("animated "+c[p.effect].out).addClass("animated "+c[p.effect].in).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){S.addOverlay()}),p.auto.start&&(v++,k=setTimeout(function(){S.outEffect()},w))})},addOverlay:function(){if("none"!==p.overlay){if(p.caption||p.controls.enable){var n=e(p.main.container).find("img").position(),a=parseInt(e(p.main.container).find("img").css("border-left-width"),10),t=e(p.main.container).find("img").width()+a,i=e(p.main.container).find("img").height()+a;0===e(p.main.container).find(".desoSlide-overlay").length&&e("<div>",{"class":"desoSlide-overlay"}).appendTo(e(p.main.container).find(".desoSlide-wrapper")),y=e(p.main.container).find(".desoSlide-overlay");var o=parseInt(y.css("padding-top").replace("px",""),10),r=parseInt(y.css("padding-bottom").replace("px",""),10),s=parseInt(y.css("padding-left").replace("px",""),10),d=parseInt(y.css("padding-right").replace("px",""),10),l=parseInt(y.css("height").replace("px",""),10)-(s+d);l=parseInt(i,10)-l-(o+r);var c=n.top+l,f=n.left;y.css({left:f+"px",top:c+"px",width:t+"px"}),"always"===p.overlay&&y.animate({opacity:.7},500),p.caption&&(S.updateCaption(),S.addLink())}else S.addLink();p.controls.enable&&S.addControls()}},updateCaption:function(){y.html(s)},addLink:function(){t=e(p.main.container).find("a.desoslide-link").length>0?!0:!1,i=void 0!==d&&""!==d?!0:!1;var n=e("<a>",{"class":"desoslide-link",href:d,target:"_blank"});t&&i?e(p.main.container).find("a.desoslide-link").attr("href",d):t&&!i?e(p.main.container).find("a.desoslide-link").replaceWith(n):!t&&i&&e(p.main.container).find(".desoSlide-wrapper").append(n)},addControls:function(){e(p.main.container).find(".desoSlide-controls-wrapper").remove();var n='<a href="#prev"><span class="desoSlide-controls prev"></span></a>',a='<a href="#pause"><span class="desoSlide-controls pause"></span></a>',t='<a href="#play"><span class="desoSlide-controls play"></span></a>',i='<a href="#next"><span class="desoSlide-controls next"></span></a>',o=e("<div>",{"class":"desoSlide-controls-wrapper"}).append(n+a+t+i);o.css({width:y.css("width"),left:y.css("left")}),e(p.main.container).find("a.desoslide-link").length>0?o.appendTo(e(p.main.container).find("a.desoslide-link")):o.appendTo(e(p.main.container).find(".desoSlide-wrapper")),l=e(p.main.container).find(".desoSlide-controls-wrapper"),p.auto.start?l.find('a[href="#play"]').hide().parent().find('a[href="#pause"]').show():l.find('a[href="#pause"]').hide().parent().find('a[href="#play"]').show()},pause:function(){p.auto.start&&k&&(p.auto.start=!1,clearTimeout(k),v--,l.find('a[href="#pause"]').hide().parent().find('a[href="#play"]').show())},play:function(){p.auto.start||(p.auto.start=!0,a===v&&v++,S.outEffect(),l.find('a[href="#play"]').hide().parent().find('a[href="#pause"]').show())},resultHandler:function(e,n){if(!b)switch(e){case"error":void 0!==console&&console.error("desoSlide: "+n),p.result&&p.result("error"),b=e;break;case"warning":void 0!==console&&console.warn("desoSlide: "+n),p.result&&p.result("warning");break;default:p.result&&p.result("success")}},events:function(){h.find("a").on("click",function(n){n.preventDefault();var a=e(this),t=a.parent("li").index();t!==v&&(y.animate({opacity:0}),v=t,S.outEffect(),S.pause())}),h.find("img").on({mouseover:function(){e(this).stop(!0,!0).animate({opacity:.7},"normal")},mouseout:function(){e(this).stop(!0,!0).animate({opacity:1},"fast")}}),"hover"===p.overlay&&e(p.main.container).on({mouseover:function(){y.stop().animate({opacity:.7},400)},mouseleave:function(){y.stop().animate({opacity:0},400)}}),p.controls.enable&&p.controls.keys&&e(document).on("keydown",function(n){switch(n.which){case 37:e(p.main.container).trigger("prev.desoslide");break;case 39:e(p.main.container).trigger("next.desoslide");break;case 32:n.preventDefault(),e(p.main.container).trigger(p.auto.start?"pause.desoslide":"play")}}),e(p.main.container).on("click",".desoSlide-controls-wrapper a",e(p.main.container),function(n){switch(n.preventDefault(),e(this).attr("href")){case"#prev":e(p.main.container).trigger("prev.desoslide");break;case"#pause":e(p.main.container).trigger("pause.desoslide");break;case"#play":e(p.main.container).trigger("play.desoslide");break;case"#next":e(p.main.container).trigger("next.desoslide")}}),e(p.main.container).on("prev.desoslide",function(){S.pause(),v--,S.outEffect()}),e(p.main.container).on("pause.desoslide",function(){S.pause()}),e(p.main.container).on("play.desoslide",function(){S.play()}),e(p.main.container).on("next.desoslide",function(){S.pause(),v++,S.outEffect()}),e(window).bind("resize",function(){p.caption&&u(function(){S.addOverlay()},100)})}};return e(window).load(function(){S.checks(),S.init(),S.events()}),this}}(jQuery);