!function(e){e.fn.desoSlide=function(a){var n,t,i,o,r,s,l,d,c,p={main:{container:!1,cssClass:"",insertion:"append"},auto:{load:!0,start:!1},first:0,interval:3e3,effect:"fade",overlay:"always",caption:!1,controls:{enable:!0,keys:!0},log:{errors:!0,warnings:!0},result:!1},u=e.extend(!0,p,a),f=function(){var e=0;return function(a,n){clearTimeout(e),e=setTimeout(a,n)}}(),m=this,h=e("li",m),g=h.length,v=u.first,y=e(".desoSlide-overlay",e(u.main.container)),w=u.interval<1500?1500:u.interval,k=!1,b=!1,S={checks:function(){0==m.length&&S.resultHandler("error",m.selector+" doesn't exist."),u.main.container?0==e(u.main.container).length&&S.resultHandler("error",e(u.main.container).selector+" doesn't exist."):S.resultHandler("error",'You must specify the "main.container" param. Check out the documentation.'),"always"!=u.overlay&&"hover"!=u.overlay&&S.resultHandler("error",'Bad value for the "caption.display" param. Check out the documentation.'),v>=g&&(0==g?S.resultHandler("error","You must have at least 1 thumbnail."):S.resultHandler("error",'The "first" param must be between 0 and '+(g-1)+"."))},checkData:function(){!u.caption||"undefined"!=typeof s&&""!=s||S.resultHandler("warning","The captions are enabled and the data-caption attribute is missing on a thumb. Add it or disable captions. Check out the documention."),("undefined"==typeof r||""==r)&&S.resultHandler("warning","The alt attribute is missing on a thumb, it's mandatory on <img> tags.")},init:function(){u.auto.load&&e("a",h).each(function(a,n){e("<img>",{src:n.href,alt:""}).hide().appendTo("body")}),S.effectHandler(),S.addWrapper()},addWrapper:function(){var a=e("<div>",{"class":"desoSlide-wrapper"}),n=e("<img>").addClass(u.main.cssClass).css("opacity",0);switch(u.main.insertion){case"prepend":n.prependTo(e(u.main.container)).wrap(a);break;case"append":n.appendTo(e(u.main.container)).wrap(a);break;case"replace":e(u.main.container).html(n).wrapInner(a);break;default:S.resultHandler("error",'Bad value for the "insertion" param. Check out the documentation.')}S.displayImg()},effectHandler:function(){if(c={fade:{"in":"fadeIn",out:"fadeOut"},flip:{"in":"flipInX",out:"flipOutX"},light:{"in":"lightSpeedIn",out:"lightSpeedOut"},roll:{"in":"rollIn",out:"rollOut"},rotate:{"in":"rotateIn",out:"rotateOut"}},!(u.effect in c)){var a=0;e.each(c,function(e){0==a&&(u.effect=e),a++}),S.resultHandler("error",'Bad value for the "effect" param. Default value is used. Check out the documentation.')}},outEffect:function(){e("img",e(u.main.container)).removeClass("animated "+c[u.effect].in).addClass("animated "+c[u.effect].out),setTimeout(function(){S.displayImg()},600)},displayImg:function(){S.resultHandler(),n=0,0>v&&(v=g-1),v>=g&&(v=0),n=v,o=e("a",h).eq(n).attr("href"),r=e("img",h).eq(n).attr("alt"),s=e("img",h).eq(n).data("caption"),l=e("img",h).eq(n).data("href"),S.checkData(),e("img",e(u.main.container)).attr({src:o,alt:r,"data-caption":s}).one("load",function(){e(this).removeClass("animated "+c[u.effect].out).addClass("animated "+c[u.effect].in),setTimeout(function(){S.addOverlay()},700),u.auto.start&&(v++,k=setTimeout(function(){S.outEffect()},w))})},addOverlay:function(){if(u.caption||u.controls.enable){var a=0,n=e("img",e(u.main.container)).position(),t=parseInt(e("img",e(u.main.container)).css("border-left-width"),10),i=e("img",e(u.main.container)).width()+t,o=e("img",e(u.main.container)).height()+t;0==e(".desoSlide-overlay",e(u.main.container)).length&&e("<div>",{"class":"desoSlide-overlay"}).appendTo(e(".desoSlide-wrapper",e(u.main.container))),y=e(".desoSlide-overlay",e(u.main.container)),a=i;var r=parseInt(y.css("padding-top").replace("px",""),10),s=parseInt(y.css("padding-bottom").replace("px",""),10),l=parseInt(y.css("padding-left").replace("px",""),10),d=parseInt(y.css("padding-right").replace("px",""),10),c=parseInt(y.css("height").replace("px",""),10)-(l+d);c=parseInt(o,10)-c-(r+s);var p=n.top+c,f=n.left;y.css({left:f+"px",top:p+"px",width:a+"px"}),"always"==u.overlay&&y.animate({opacity:.7},500),u.caption&&(S.updateCaption(),S.addLink())}else S.addLink();u.controls.enable&&S.addControls()},updateCaption:function(){y.html(s)},addLink:function(){t=e("a.desoslide-link",e(u.main.container)).length>0?!0:!1,i="undefined"!=typeof l&&""!=l?!0:!1;var a=e("<a>",{"class":"desoslide-link",href:l,target:"_blank"});t&&i?e("a.desoslide-link",e(u.main.container)).attr("href",l):t&&!i?e("a.desoslide-link",e(u.main.container)).replaceWith(a):!t&&i&&e(".desoSlide-wrapper",e(u.main.container)).append(a)},addControls:function(){e(".desoSlide-controls-wrapper",e(u.main.container)).remove();var a='<a href="#prev"><span class="desoSlide-controls prev"></span></a>',n='<a href="#pause"><span class="desoSlide-controls pause"></span></a>',t='<a href="#play"><span class="desoSlide-controls play"></span></a>',i='<a href="#next"><span class="desoSlide-controls next"></span></a>',o=e("<div>",{"class":"desoSlide-controls-wrapper"}).append(a+n+t+i);o.css({width:y.css("width"),left:y.css("left")}),e("a.desoslide-link",e(u.main.container)).length>0?o.appendTo(e("a.desoslide-link",e(u.main.container))):o.appendTo(e(".desoSlide-wrapper",e(u.main.container))),d=e(".desoSlide-controls-wrapper",e(u.main.container)),u.auto.start?e('a[href="#play"]',d).hide().parent().find('a[href="#pause"]').show():e('a[href="#pause"]',d).hide().parent().find('a[href="#play"]').show()},pause:function(){u.auto.start&&k&&(u.auto.start=!1,clearTimeout(k),v--,e('a[href="#pause"]',d).hide().parent().find('a[href="#play"]').show())},play:function(){u.auto.start||(u.auto.start=!0,n==v&&v++,S.outEffect(),e('a[href="#play"]',d).hide().parent().find('a[href="#pause"]').show())},resultHandler:function(e,a){if(!b)switch(e){case"error":u.log.errors&&"undefined"!=typeof console&&console.error("desoSlide: "+a),u.result&&u.result("error"),b=e;break;case"warning":u.log.warnings&&"undefined"!=typeof console&&console.warn("desoSlide: "+a),u.result&&u.result("warning");break;default:u.result&&u.result("success")}},events:function(){e("a",h).on("click",function(a){a.preventDefault();var n=e(this);n.parent("li").index()!==v&&(y.animate({opacity:0}),v=n.parent("li").index(),S.outEffect(),S.pause())}),e("img",h).on({mouseover:function(){e(this).stop(!0,!0).animate({opacity:.7},"normal")},mouseout:function(){e(this).stop(!0,!0).animate({opacity:1},"fast")}}),"hover"==u.overlay&&e(u.main.container).on({mouseover:function(){y.stop().animate({opacity:.7},400)},mouseleave:function(){y.stop().animate({opacity:0},400)}}),u.controls.enable&&u.controls.keys&&e(document).on("keydown",function(a){switch(a.which){case 37:e(u.main.container).trigger("prev.desoslide");break;case 39:e(u.main.container).trigger("next.desoslide");break;case 32:a.preventDefault(),u.auto.start?e(u.main.container).trigger("pause.desoslide"):e(u.main.container).trigger("play.desoslide")}}),e(u.main.container).on("click",".desoSlide-controls-wrapper a",e(u.main.container),function(a){switch(a.preventDefault(),e(this).attr("href")){case"#prev":e(u.main.container).trigger("prev.desoslide");break;case"#pause":e(u.main.container).trigger("pause.desoslide");break;case"#play":e(u.main.container).trigger("play.desoslide");break;case"#next":e(u.main.container).trigger("next.desoslide")}}),e(u.main.container).on("prev.desoslide",function(){S.pause(),v--,S.outEffect()}),e(u.main.container).on("pause.desoslide",function(){S.pause()}),e(u.main.container).on("play.desoslide",function(){S.play()}),e(u.main.container).on("next.desoslide",function(){S.pause(),v++,S.outEffect()}),e(window).bind("resize",function(){u.caption&&S.resultHandler.selector==m.selector&&f(function(){S.addOverlay()},100)})}};return e(window).load(function(){S.checks(),S.init(),S.events()}),this}}(jQuery);